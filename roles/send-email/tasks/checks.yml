---

- name: Message check
  fail:
    msg: "ERROR: Message or template of the message must be defined in extra vars! eg.: message='Hello' or se_temp_type='1'"
  when:
    se_temp_type == "" and se_message == ""

- name: Find created templates
  find:
    paths: templates/
    patterns: '*{{ se_temp_type }}*'
  register: se_created_templates

- name: Templates list
  debug:
    msg: "{{ se_created_templates.files }} and template suppose to be: {{ se_temp_type }}"

- name: Template check
  fail:
    msg: "ERROR: Stated template doesn't exist or it's not defined!"
  when:
    ''"templates/new_version_mcc_installed.html" not in se_created_templates'

- name: Recipients check
  fail:
    msg: "ERROR: At least one recipient must by defined in extra vars! eg.: se_recipients='devops@aura.cz'"
  when:
    se_recipients == ""

- name: Subject check
  fail:
    msg: "ERROR: Subject of the message must be defined in extra vars! eg.: se_subject='New version arrival!'"
  when:
    se_subject == ""
